# Nombre del Workflow
name:  Notificador de Acciones de Clientes

# Disparador: Se activa CADA VEZ que se abre un Issue.
on:
  issues:
    types: [opened]

# Tareas a ejecutar
jobs:
  notificar-al-equipo:
    # Correr en el 煤ltimo Ubuntu disponible
    runs-on: ubuntu-latest
    
    # Permisos para que la acci贸n pueda escribir un comentario en el issue
    permissions:
      issues: write
      
    steps:
      # Paso 1: Notificar Creaci贸n de Cliente
      # Este paso SLO se ejecuta si el issue tiene la etiqueta 'accion: crear-cliente'
      - name: Notificar Creaci贸n de Cliente
        if: contains(github.event.issue.labels.*.name, 'accion: crear-cliente')
        uses: actions/github-script@v6
        with:
          # 隆Importante! Reemplaza los usuarios de abajo
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: |
                ##  Solicitud: Creaci贸n de Nuevo Cliente
                Se ha solicitado la **creaci贸n** de un nuevo cliente.
                
                - **Solicitado por:** @${{ github.actor }}
                - **Equipo notificado:** @usuario_ficticio1, @usuario_ficticio2
                
                Por favor, revisar los detalles en este issue y procesar con el script.
            })

      # Paso 2: Notificar Actualizaci贸n de Cliente
      # Este paso SLO se ejecuta si el issue tiene la etiqueta 'accion: actualizar-cliente'
      - name: Notificar Actualizaci贸n de Cliente
        if: contains(github.event.issue.labels.*.name, 'accion: actualizar-cliente')
        uses: actions/github-script@v6
        with:
          # 隆Importante! Reemplaza los usuarios de abajo
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: |
                ##  Solicitud: Actualizaci贸n de Cliente Recurrente
                Se ha solicitado la **actualizaci贸n** de un cliente existente.
                
                - **Solicitado por:** @${{ github.actor }}
                - **Equipo notificado:** @usuario_ficticio1, @usuario_ficticio2
                
                Por favor, revisar los detalles en este issue y procesar con el script.
            })

      # Paso 3: Notificar Consulta de Cliente
      # Este paso SLO se ejecuta si el issue tiene la etiqueta 'accion: consultar-cliente'
      - name: Notificar Consulta de Cliente
        if: contains(github.event.issue.labels.*.name, 'accion: consultar-cliente')
        uses: actions/github-script@v6
        with:
          # 隆Importante! Reemplaza los usuarios de abajo
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: |
                ##  Solicitud: Consulta de Cliente
                Se ha solicitado la **consulta** de un cliente.
                
                - **Solicitado por:** @${{ github.actor }}
                - **Equipo notificado:** @usuario_ficticio1, @usuario_ficticio2
            })